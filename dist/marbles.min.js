!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.marbles=n():t.marbles=n()}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=e(1),c=r(i),f=function t(n){function e(t,n){return t.replace(w,function(t){return n[t.replace(":","")]})}function r(t,n){var e=t.match(new RegExp(w.source,"g"))||[];return(n.match(A)||[]).reduce(function(t,n,r){return t[e[r].replace(":","")]=n,c.assign(c.emptyObject(),t)},c.emptyObject())}function i(t){var n=t.replace(new RegExp(w.source,"g"),A.source);return new RegExp(n)}function f(t,n){for(var e=n;e;){if(e.id===t)return e;e=e.next}return null}function a(t,n){for(var e=c.emptyObject(),r=c.isObject(n)?n:{data:{}},o=t;o&&o!==r;)c.assign(e,o.data),o=o.next;return c.assign(e,r.data)}function s(t,n){var r=n[t];return c.assign(c.emptyObject(),r,{id:t,segment:e(r.segment,r.data),next:null})}function l(t,n,e){function r(n,e,o){var u=o[e];(n===e||u.dependency===n||t)&&(u.active=!1,u.data=c.emptyObject()),u.children.forEach(function(t){return r(n,t,o)})}var o=c.cloneDeep(e);return r(n,n,o),o}function p(t,n,e){function r(t,e,u){var i=o[e],c=o[t];return e===t&&u?(c.active=!0,c.data=n,!0):!(e===t&&!u)&&i.children.reduce(function(n,e){return r(t,e,n)},u||e===c.dependency)}var o=c.cloneDeep(e),u=c.keys(o).filter(function(n){return o[n].children.indexOf(t)!==-1}),i=r(t,"root",!1);return i?u.reduce(function(n,e){return n[e].children.filter(function(n){return n!==t}).reduce(function(t,n){return l(!0,n,t)},n)},o):o}function y(t,n){for(var e=c.cloneDeep(n),r=e,o=void 0,u=!1;r;)u=u||r.id===t.dependency,o=r,r=r.next;return u&&(o.next=c.cloneDeep(t)),e}function d(t,n){function e(t,n,o,u){var f=u[n];return f.children.reduce(function(n,f){var a=u[f],s=n,l=t.match(i(a.segment))||[],y=l.index?l.index+l[0].length:0;return o[f]?s:(o[f]=!0,l.length>0&&(u[a.dependency]||c.emptyObject()).active&&(s=p(f,r(a.segment,c.arrayHead(l)),u)),e(t.substr(y),f,o,s))},u)}var o=c.cloneDeep(n);return e(t,"root",{},o)}function h(t){return d(t,E)}function b(t){return c.listReduce(function(t,n){return n.segment?""+t+n.segment+"/":t},"#",t)}function v(t,n,e,r){var o=t[n],u=s(n,t),i=o.active?y(u,e):c.cloneDeep(e);return o.children.reduce(function(n,e){return r[e]?n:(r[e]=!0,v(t,e,n,r))},i)}function m(t){var n=c.peek(k);return n&&JSON.stringify(n)===JSON.stringify(t)||k.push(t),t}function g(t){return t?v(t,"root",s("root",t),c.emptyObject()):null}function j(t,n,e){return c.listReduce(function(t,r){var o=f(r.id,n);return!o||e&&!c.equal(o.data,r.data)?t.concat(r):t},[],t)}function O(t,n,e){var r=g(n),o=g(e),u=j(r,o,!1),i=j(o,r,!0);u.forEach(function(n){t[n.id].forEach(function(t){t.removed(a(r,n))})}),c.listForEach(function(n){t[n.id].forEach(function(t){t.inserted(a(o,n))})},i[0]||null)}function x(t,n,e){var r=e;if(!c.isString(n)||!E[n])return null;(null===e||"object"!==("undefined"==typeof e?"undefined":u(e))||e instanceof Array)&&(r=c.emptyObject());var o=h(S.location.hash),i=void 0;return i=t?p(n,r,o):l(!1,n,o),S.location.hash=b(g(i)),this}var S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;o(this,t);var E=n,w=/:[a-zA-Z]+(?=\/?)/,A=/\d+(?=\/?)/,D=c.keys(E).reduce(function(t,n){return t[n]=[],t},c.emptyObject()),k=[];this.subscribe=function(t){if(!c.isObject(t))return!1;var n=c.keys(t).filter(function(t){return!!D[t]});return 0!==n.length&&(n.forEach(function(n){var e=t[n];D[n].push({inserted:e.inserted||c.noop,removed:e.removed||c.noop})}),!0)},this.unsubscribe=function(t,n,e){if(!(c.isString(t)&&c.isString(n)&&c.isFunction(e)&&D[t]))return!1;var r=D[t].filter(function(t){return t[n]===e});return c.pull(r,D[t])},this.insert=function(t,n){return x.call(this,!0,t,n)},this.remove=function(t){return x.call(this,!1,t)},this.getData=function(){return a(g(h(S.location.hash)))},this.step=function(){var t=S.location.hash,n=h(t);O(D,k.pop(),n),m(n);var e=S.location.hash,r=h(e);return S.history.replaceState(c.emptyObject(),"",b(g(r))),this};var R=this.step.bind(this);this.start=function(){return S.addEventListener("hashchange",R),this},this.stop=function(){return S.removeEventListener("hashchange",R),this}};n.default=f},function(t,n,e){"use strict";function r(){return Object.create(null)}function o(t){return"object"===("undefined"==typeof t?"undefined":x(t))&&null!==t&&!(t instanceof Array)}function u(t){return t instanceof Array}function i(t){return"string"==typeof t}function c(t){return"function"==typeof t}function f(t){return Object.keys(t)}function a(t){return JSON.parse(JSON.stringify(t))}function s(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return Object.assign.apply(this,n)}function l(t){if("undefined"!=typeof t&&t instanceof Array)return t[0]}function p(t,n){return t.map(function(t){for(var e=n.indexOf(t),r=[];e!==-1;)r=r.concat(n.splice(e,1)),e=n.indexOf(t);return r}).reduce(function(t,n){return t.concat(n)},[]).reduce(function(t,n){return t.indexOf(n)!==-1?t:t.concat(n instanceof Array?[n]:n)},[])}function y(t,n){var e=n.slice();return p(t,e),e}function d(t){return t&&t instanceof Array?t[t.length-1]||null:null}function h(){}function b(t){return null===t||o(t)&&"object"===x(t.next)}function v(t){if(!b(t))throw new TypeError("listForEach requires a list! Lists are objects with a `next` property.")}function m(t,n){v(n);for(var e=n,r=0;e;)t(e,r),e=e.next,r+=1}function g(t,n){var e=[];return m(function(n,r){e.push(t(n,r))},n),e.reduceRight(function(t,n){return s({},n,{next:t})},null)}function j(t,n,e){return function t(n,e,r,o){return null===r?e:(v(r),t(n,n(e,r,o),r.next,o+1))}(t,n,e,0)}function O(t,n){if(!u(t))throw new TypeError("batchAsyncResults() expects an array of functions as the first parameter.");var e=0,r=[];t.forEach(function(o){o(function(o){e+=1,r.push(o),e===t.length&&n(r)})})}Object.defineProperty(n,"__esModule",{value:!0});var x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S=e(2);n.equal=S,n.emptyObject=r,n.isArray=u,n.isObject=o,n.isFunction=c,n.isString=i,n.isList=b,n.listForEach=m,n.listMap=g,n.listReduce=j,n.batchAsyncActions=O,n.noop=h,n.keys=f,n.peek=d,n.cloneDeep=a,n.assign=s,n.arrayHead=l,n.pull=p,n.without=y},function(t,n,e){function r(t){return null===t||void 0===t}function o(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}function u(t,n,e){var u,s;if(r(t)||r(n))return!1;if(t.prototype!==n.prototype)return!1;if(f(t))return!!f(n)&&(t=i.call(t),n=i.call(n),a(t,n,e));if(o(t)){if(!o(n))return!1;if(t.length!==n.length)return!1;for(u=0;u<t.length;u++)if(t[u]!==n[u])return!1;return!0}try{var l=c(t),p=c(n)}catch(t){return!1}if(l.length!=p.length)return!1;for(l.sort(),p.sort(),u=l.length-1;u>=0;u--)if(l[u]!=p[u])return!1;for(u=l.length-1;u>=0;u--)if(s=l[u],!a(t[s],n[s],e))return!1;return typeof t==typeof n}var i=Array.prototype.slice,c=e(4),f=e(3),a=t.exports=function(t,n,e){return e||(e={}),t===n||(t instanceof Date&&n instanceof Date?t.getTime()===n.getTime():!t||!n||"object"!=typeof t&&"object"!=typeof n?e.strict?t===n:t==n:u(t,n,e))}},function(t,n){function e(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();n=t.exports=o?e:r,n.supported=e,n.unsupported=r},function(t,n){function e(t){var n=[];for(var e in t)n.push(e);return n}n=t.exports="function"==typeof Object.keys?Object.keys:e,n.shim=e}])});
//# sourceMappingURL=marbles.min.js.map