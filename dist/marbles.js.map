{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5286d99557cb69ea111c","webpack:///./src/marbles.js","webpack:///./src/util.js","webpack:///./~/deep-equal/index.js","webpack:///./~/deep-equal/lib/keys.js","webpack:///./~/deep-equal/lib/is_arguments.js"],"names":["util","module","exports","routingGraph","win","window","IMMUTABLE_GRAPH","DYNAMIC_SEGMENT_REGEX","DIGIT_SEGMENT_REGEX","observers","keys","reduce","obj","key","emptyObject","graphStack","expandSegment","segment","data","replace","segmentKey","extractSegmentData","templateSegment","segmentWithData","dynamicSegments","match","RegExp","source","value","index","assign","segmentToRegex","regexed","findListNode","nodeId","list","next","id","chainData","upToNode","stop","isObject","graphNodeToListNode","graph","graphNode","deactivateGraphNode","force","immutableGraph","cloneDeep","recDeactivate","target","current","g","curr","dependency","active","children","forEach","childId","activateGraphNode","parents","filter","indexOf","dfsActivate","searchId","currentId","dependencyMet","search","depMet","activated","parentId","retG","appendNode","node","head","clonedHead","last","parseHash","hashRoute","routeGraph","recParse","hash","rootId","visitedNodes","root","child","newG","matches","substrIndex","length","arrayHead","substr","newGraph","buildGraph","listToHashRoute","listReduce","graphToLinkedList","listHead","nextListNode","newHead","logGraph","lastGraph","peek","JSON","stringify","push","graphToList","listDiff","from","against","includeUpdates","arr","found","equal","concat","notifyObservers","obsObj","oldGraph","oldListHead","newListHead","removed","insertedNodes","obs","listForEach","inserted","insertOrRemove","insert","segmentId","dataToUse","isString","Array","location","subscribe","subscriptions","matchingKeys","sub","noop","unsubscribe","event","handler","isFunction","matchingObservers","pull","call","remove","getData","step","beginningState","beginningGraph","pop","newState","history","replaceState","listener","bind","start","addEventListener","removeEventListener","deepEqual","require","Object","create","any","isArray","parse","args","apply","array","undefined","values","map","val","results","splice","returnArray","subArray","without","newArray","slice","isList","listish","assertList","TypeError","iterator","i","listMap","newNodes","reduceRight","tail","reducer","accumulator","foldl","f","a","batchAsyncActions","fns","callback","resolvedCount","fn","result"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;ACtCA;;KAAYA,I;;;;;;AAEZC,QAAOC,OAAP,GACE,iBAAYC,YAAZ,EAAwC;AAAA,OAAdC,GAAc,uEAARC,MAAQ;;AAAA;;AACtC,OAAMC,kBAAkBH,YAAxB;AACA,OAAMI,wBAAwB,mBAA9B;AACA,OAAMC,sBAAsB,YAA5B;AACA,OAAMC,YAAYT,KAAKU,IAAL,CAAUJ,eAAV,EAA2BK,MAA3B,CAAkC,UAACC,GAAD,EAAMC,GAAN,EAAc;AAChED,SAAIC,GAAJ,IAAW,EAAX;AACA,YAAOD,GAAP;AACD,IAHiB,EAGfZ,KAAKc,WAAL,EAHe,CAAlB;AAIA,OAAMC,aAAa,EAAnB;;AAEA;AACA,YAASC,aAAT,CAAuBC,OAAvB,EAAgCC,IAAhC,EAAsC;AACpC,YAAOD,QAAQE,OAAR,CACLZ,qBADK,EAEL;AAAA,cAAcW,KAAKE,WAAWD,OAAX,CAAmB,GAAnB,EAAwB,EAAxB,CAAL,CAAd;AAAA,MAFK,CAAP;AAID;;AAED,YAASE,kBAAT,CAA4BC,eAA5B,EAA6CC,eAA7C,EAA8D;AAC5D,SAAMC,kBAAkBF,gBAAgBG,KAAhB,CACtB,IAAIC,MAAJ,CAAWnB,sBAAsBoB,MAAjC,EAAyC,GAAzC,CADsB,KAEnB,EAFL;AAGA,YAAO,CAACJ,gBAAgBE,KAAhB,CAAsBjB,mBAAtB,KAA8C,EAA/C,EAAmDG,MAAnD,CAA0D,UAACO,IAAD,EAAOU,KAAP,EAAcC,KAAd,EAAwB;AACvFX,YAAKM,gBAAgBK,KAAhB,EAAuBV,OAAvB,CAA+B,GAA/B,EAAoC,EAApC,CAAL,IAAgDS,KAAhD;AACA,cAAO5B,KAAK8B,MAAL,CAAY9B,KAAKc,WAAL,EAAZ,EAAgCI,IAAhC,CAAP;AACD,MAHM,EAILlB,KAAKc,WAAL,EAJK,CAAP;AAMD;;AAED,YAASiB,cAAT,CAAwBd,OAAxB,EAAiC;AAC/B;AACA,SAAMe,UAAUf,QAAQE,OAAR,CACd,IAAIO,MAAJ,CAAWnB,sBAAsBoB,MAAjC,EAAyC,GAAzC,CADc,EAEdnB,oBAAoBmB,MAFN,CAAhB;AAIA,YAAO,IAAID,MAAJ,CAAWM,OAAX,CAAP;AACD;;AAED,YAASC,YAAT,CAAsBC,MAAtB,EAA8BC,IAA9B,EAAoC;AAClC,SAAIC,OAAOD,IAAX;AACA,YAAOC,IAAP,EAAa;AACX,WAAIA,KAAKC,EAAL,KAAYH,MAAhB,EAAwB;AACtB,gBAAOE,IAAP;AACD;AACDA,cAAOA,KAAKA,IAAZ;AACD;AACD,YAAO,IAAP;AACD;;AAED,YAASE,SAAT,CAAmBH,IAAnB,EAAyBI,QAAzB,EAAmC;AACjC,SAAMrB,OAAOlB,KAAKc,WAAL,EAAb;AACA,SAAM0B,OAAOxC,KAAKyC,QAAL,CAAcF,QAAd,IAA0BA,QAA1B,GAAqC,EAAErB,MAAM,EAAR,EAAlD;AACA,SAAIkB,OAAOD,IAAX;AACA,YAAOC,QAAQA,SAASI,IAAxB,EAA8B;AAC5BxC,YAAK8B,MAAL,CAAYZ,IAAZ,EAAkBkB,KAAKlB,IAAvB;AACAkB,cAAOA,KAAKA,IAAZ;AACD;AACD,YAAOpC,KAAK8B,MAAL,CAAYZ,IAAZ,EAAkBsB,KAAKtB,IAAvB,CAAP;AACD;;AAED,YAASwB,mBAAT,CAA6BL,EAA7B,EAAiCM,KAAjC,EAAwC;AACtC,SAAMC,YAAYD,MAAMN,EAAN,CAAlB;AACA,YAAOrC,KAAK8B,MAAL,CAAY9B,KAAKc,WAAL,EAAZ,EAAgC8B,SAAhC,EAA2C;AAChDP,aADgD;AAEhDpB,gBAASD,cAAc4B,UAAU3B,OAAxB,EAAiC2B,UAAU1B,IAA3C,CAFuC;AAGhDkB,aAAM;AAH0C,MAA3C,CAAP;AAKD;;AAED,YAASS,mBAAT,CAA6BC,KAA7B,EAAoCZ,MAApC,EAA4Ca,cAA5C,EAA4D;AAC1D,SAAMJ,QAAQ3C,KAAKgD,SAAL,CAAeD,cAAf,CAAd;AACA,cAASE,aAAT,CAAuBC,MAAvB,EAA+BC,OAA/B,EAAwCC,CAAxC,EAA2C;AACzC,WAAMC,OAAOD,EAAED,OAAF,CAAb;AACA,WAAID,WAAWC,OAAX,IAAsBE,KAAKC,UAAL,KAAoBJ,MAA1C,IAAoDJ,KAAxD,EAA+D;AAC7DO,cAAKE,MAAL,GAAc,KAAd;AACAF,cAAKnC,IAAL,GAAYlB,KAAKc,WAAL,EAAZ;AACD;AACDuC,YAAKG,QAAL,CAAcC,OAAd,CAAsB;AAAA,gBAAWR,cAAcC,MAAd,EAAsBQ,OAAtB,EAA+BN,CAA/B,CAAX;AAAA,QAAtB;AACD;AACDH,mBAAcf,MAAd,EAAsBA,MAAtB,EAA8BS,KAA9B;AACA,YAAOA,KAAP;AACD;;AAED,YAASgB,iBAAT,CAA2BzB,MAA3B,EAAmChB,IAAnC,EAAyC6B,cAAzC,EAAyD;AACvD,SAAMJ,QAAQ3C,KAAKgD,SAAL,CAAeD,cAAf,CAAd;AACA,SAAMa,UAAU5D,KAAKU,IAAL,CAAUiC,KAAV,EAAiBkB,MAAjB,CAAwB;AAAA,cAAOlB,MAAM9B,GAAN,EAAW2C,QAAX,CAAoBM,OAApB,CAA4B5B,MAA5B,MAAwC,CAAC,CAAhD;AAAA,MAAxB,CAAhB;AACA,cAAS6B,WAAT,CAAqBC,QAArB,EAA+BC,SAA/B,EAA0CC,aAA1C,EAAyD;AACvD,WAAMb,OAAOV,MAAMsB,SAAN,CAAb;AACA,WAAME,SAASxB,MAAMqB,QAAN,CAAf;AACA,WAAIC,cAAcD,QAAd,IAA0BE,aAA9B,EAA6C;AAC3CC,gBAAOZ,MAAP,GAAgB,IAAhB;AACAY,gBAAOjD,IAAP,GAAcA,IAAd;AACA,gBAAO,IAAP;AACD,QAJD,MAKK,IAAI+C,cAAcD,QAAd,IAA0B,CAACE,aAA/B,EAA8C;AACjD,gBAAO,KAAP;AACD;AACD,cAAOb,KAAKG,QAAL,CAAc7C,MAAd,CACL,UAACyD,MAAD,EAASV,OAAT;AAAA,gBAAqBK,YAAYC,QAAZ,EAAsBN,OAAtB,EAA+BU,MAA/B,CAArB;AAAA,QADK,EAELF,iBAAiBD,cAAcE,OAAOb,UAFjC,CAAP;AAID;;AAED,SAAMe,YAAYN,YAAY7B,MAAZ,EAAoB,MAApB,EAA4B,KAA5B,CAAlB;AACA,SAAImC,SAAJ,EAAe;AACb;AACA,cAAOT,QAAQjD,MAAR,CAAe,UAACyC,CAAD,EAAIkB,QAAJ;AAAA,gBACpBlB,EAAEkB,QAAF,EAAYd,QAAZ,CAAqBK,MAArB,CAA4B;AAAA,kBAAMxB,OAAOH,MAAb;AAAA,UAA5B,EAAiDvB,MAAjD,CAAwD,UAAC4D,IAAD,EAAOb,OAAP;AAAA,kBACtDb,oBAAoB,IAApB,EAA0Ba,OAA1B,EAAmCa,IAAnC,CADsD;AAAA,UAAxD,EAEEnB,CAFF,CADoB;AAAA,QAAf,EAILT,KAJK,CAAP;AAKD;AACD,YAAOA,KAAP;AACD;;AAED,YAAS6B,UAAT,CAAoBC,IAApB,EAA0BC,IAA1B,EAAgC;AAC9B,SAAMC,aAAa3E,KAAKgD,SAAL,CAAe0B,IAAf,CAAnB;AACA,SAAItC,OAAOuC,UAAX;AACA,SAAIC,aAAJ;AACA,SAAIV,gBAAgB,KAApB;AACA,YAAO9B,IAAP,EAAa;AACX8B,uBAAgBA,iBAAiB9B,KAAKC,EAAL,KAAYoC,KAAKnB,UAAlD;AACAsB,cAAOxC,IAAP;AACAA,cAAOA,KAAKA,IAAZ;AACD;AACD,SAAI8B,aAAJ,EAAmB;AACjBU,YAAKxC,IAAL,GAAYpC,KAAKgD,SAAL,CAAeyB,IAAf,CAAZ;AACD;AACD,YAAOE,UAAP;AACD;;AAED,YAASE,SAAT,CAAmBC,SAAnB,EAA8BC,UAA9B,EAA0C;AACxC,cAASC,QAAT,CAAkBC,IAAlB,EAAwBC,MAAxB,EAAgCC,YAAhC,EAA8CxC,KAA9C,EAAqD;AACnD,WAAMyC,OAAOzC,MAAMuC,MAAN,CAAb;AACA,cAAOE,KAAK5B,QAAL,CAAc7C,MAAd,CAAqB,UAACyC,CAAD,EAAIM,OAAJ,EAAgB;AAC1C,aAAM2B,QAAQ1C,MAAMe,OAAN,CAAd;AACA,aAAI4B,OAAOlC,CAAX;AACA,aAAMmC,UAAUN,KAAKxD,KAAL,CAAWM,eAAesD,MAAMpE,OAArB,CAAX,KAA6C,EAA7D;AACA,aAAMuE,cAAcD,QAAQ1D,KAAR,GAAgB0D,QAAQ1D,KAAR,GAAgB0D,QAAQ,CAAR,EAAWE,MAA3C,GAAoD,CAAxE;AACA,aAAIN,aAAazB,OAAb,CAAJ,EAA2B;AACzB,kBAAO4B,IAAP;AACD;AACDH,sBAAazB,OAAb,IAAwB,IAAxB;AACA,aAAI6B,QAAQE,MAAR,GAAiB,CAAjB,IAAsB,CAAC9C,MAAM0C,MAAM/B,UAAZ,KAA2BtD,KAAKc,WAAL,EAA5B,EAAgDyC,MAA1E,EAAkF;AAChF+B,kBAAO3B,kBACLD,OADK,EAELrC,mBAAmBgE,MAAMpE,OAAzB,EAAkCjB,KAAK0F,SAAL,CAAeH,OAAf,CAAlC,CAFK,EAGL5C,KAHK,CAAP;AAKD;AACD,gBAAOqC,SAASC,KAAKU,MAAL,CAAYH,WAAZ,CAAT,EAAmC9B,OAAnC,EAA4CyB,YAA5C,EAA0DG,IAA1D,CAAP;AACD,QAjBM,EAiBJ3C,KAjBI,CAAP;AAkBD;AACD,SAAMiD,WAAW5F,KAAKgD,SAAL,CAAe+B,UAAf,CAAjB;AACA,YAAOC,SAASF,SAAT,EAAoB,MAApB,EAA4B,EAA5B,EAAgCc,QAAhC,CAAP;AACD;;AAED,YAASC,UAAT,CAAoBZ,IAApB,EAA0B;AACxB,YAAOJ,UAAUI,IAAV,EAAgB3E,eAAhB,CAAP;AACD;;AAED,YAASwF,eAAT,CAAyBpB,IAAzB,EAA+B;AAC7B,YAAO1E,KAAK+F,UAAL,CAAgB,UAACd,IAAD,EAAOR,IAAP,EAAgB;AACrC,WAAIA,KAAKxD,OAAT,EAAkB;AAChB,qBAAUgE,IAAV,GAAiBR,KAAKxD,OAAtB;AACD;AACD,cAAOgE,IAAP;AACD,MALM,EAKJ,GALI,EAKCP,IALD,CAAP;AAMD;;AAED,YAASsB,iBAAT,CAA2BrD,KAA3B,EAAkCuC,MAAlC,EAA0Ce,QAA1C,EAAoDd,YAApD,EAAkE;AAChE,SAAMC,OAAOzC,MAAMuC,MAAN,CAAb;AACA,SAAMgB,eAAexD,oBAAoBwC,MAApB,EAA4BvC,KAA5B,CAArB;AACA,SAAMwD,UAAUf,KAAK7B,MAAL,GAAciB,WAAW0B,YAAX,EAAyBD,QAAzB,CAAd,GAAmDjG,KAAKgD,SAAL,CAAeiD,QAAf,CAAnE;;AAEA,YAAOb,KAAK5B,QAAL,CAAc7C,MAAd,CACL,UAAC+D,IAAD,EAAOhB,OAAP,EAAmB;AACjB,WAAIyB,aAAazB,OAAb,CAAJ,EAA2B;AACzB,gBAAOgB,IAAP;AACD;AACDS,oBAAazB,OAAb,IAAwB,IAAxB;AACA,cAAOsC,kBAAkBrD,KAAlB,EAAyBe,OAAzB,EAAkCgB,IAAlC,EAAwCS,YAAxC,CAAP;AACD,MAPI,EAQLgB,OARK,CAAP;AAUD;;AAED,YAASC,QAAT,CAAkBR,QAAlB,EAA4B;AAC1B,SAAMS,YAAYrG,KAAKsG,IAAL,CAAUvF,UAAV,CAAlB;AACA,SAAI,CAACsF,SAAD,IAAcE,KAAKC,SAAL,CAAeH,SAAf,MAA8BE,KAAKC,SAAL,CAAeZ,QAAf,CAAhD,EAA0E;AACxE7E,kBAAW0F,IAAX,CAAgBb,QAAhB;AACD;AACD,YAAOA,QAAP;AACD;;AAED,YAASc,WAAT,CAAqB/D,KAArB,EAA4B;AAC1B,SAAI,CAACA,KAAL,EAAY;AACV,cAAO,IAAP;AACD;AACD,YAAOqD,kBACLrD,KADK,EAEL,MAFK,EAGLD,oBAAoB,MAApB,EAA4BC,KAA5B,CAHK,EAIL3C,KAAKc,WAAL,EAJK,CAAP;AAMD;;AAED,YAAS6F,QAAT,CAAkBC,IAAlB,EAAwBC,OAAxB,EAAiCC,cAAjC,EAAiD;AAC/C,YAAO9G,KAAK+F,UAAL,CAAgB,UAACgB,GAAD,EAAMtC,IAAN,EAAe;AACpC,WAAMuC,QAAQ/E,aAAawC,KAAKpC,EAAlB,EAAsBwE,OAAtB,CAAd;AACA,WAAI,CAACG,KAAD,IAAWF,kBAAkB,CAAC9G,KAAKiH,KAAL,CAAWD,MAAM9F,IAAjB,EAAuBuD,KAAKvD,IAA5B,CAAlC,EAAsE;AACpE,gBAAO6F,IAAIG,MAAJ,CAAWzC,IAAX,CAAP;AACD;AACD,cAAOsC,GAAP;AACD,MANM,EAMJ,EANI,EAMAH,IANA,CAAP;AAOD;;AAED,YAASO,eAAT,CAAyBC,MAAzB,EAAiCC,QAAjC,EAA2CzB,QAA3C,EAAqD;AACnD,SAAM0B,cAAcZ,YAAYW,QAAZ,CAApB;AACA,SAAME,cAAcb,YAAYd,QAAZ,CAApB;AACA,SAAM4B,UAAUb,SAASW,WAAT,EAAsBC,WAAtB,EAAmC,KAAnC,CAAhB;AACA,SAAME,gBAAgBd,SAASY,WAAT,EAAsBD,WAAtB,EAAmC,IAAnC,CAAtB;AACAE,aAAQ/D,OAAR,CAAgB,UAACgB,IAAD,EAAU;AACxB2C,cAAO3C,KAAKpC,EAAZ,EAAgBoB,OAAhB,CAAwB,UAACiE,GAAD,EAAS;AAC/BA,aAAIF,OAAJ,CAAYlF,UAAUgF,WAAV,EAAuB7C,IAAvB,CAAZ;AACD,QAFD;AAGD,MAJD;AAKAzE,UAAK2H,WAAL,CAAiB,UAAClD,IAAD,EAAU;AACzB2C,cAAO3C,KAAKpC,EAAZ,EAAgBoB,OAAhB,CAAwB,UAACiE,GAAD,EAAS;AAC/BA,aAAIE,QAAJ,CAAatF,UAAUiF,WAAV,EAAuB9C,IAAvB,CAAb;AACD,QAFD;AAGD,MAJD,EAIGgD,cAAc,CAAd,KAAoB,IAJvB;AAKD;;AAED,YAASI,cAAT,CAAwBC,MAAxB,EAAgCC,SAAhC,EAA2C7G,IAA3C,EAAiD;AAC/C,SAAI8G,YAAY9G,IAAhB;AACA,SAAI,CAAClB,KAAKiI,QAAL,CAAcF,SAAd,CAAD,IAA6B,CAACzH,gBAAgByH,SAAhB,CAAlC,EAA8D;AAC5D,cAAO,IAAP;AACD;AACD,SAAI7G,SAAS,IAAT,IAAiB,QAAOA,IAAP,yCAAOA,IAAP,OAAgB,QAAjC,IAA6CA,gBAAgBgH,KAAjE,EAAwE;AACtEF,mBAAYhI,KAAKc,WAAL,EAAZ;AACD;AACD,SAAM6B,QAAQkD,WAAWzF,IAAI+H,QAAJ,CAAalD,IAAxB,CAAd;AACA,SAAIW,iBAAJ;AACA,SAAIkC,MAAJ,EAAY;AACVlC,kBAAWjC,kBAAkBoE,SAAlB,EAA6BC,SAA7B,EAAwCrF,KAAxC,CAAX;AACD,MAFD,MAGK;AACHiD,kBAAW/C,oBAAoB,KAApB,EAA2BkF,SAA3B,EAAsCpF,KAAtC,CAAX;AACD;AACDvC,SAAI+H,QAAJ,CAAalD,IAAb,GAAoBa,gBAAgBY,YAAYd,QAAZ,CAAhB,CAApB;AACA,YAAO,IAAP;AACD;AACD;;AAEA;AACA,QAAKwC,SAAL,GAAiB,SAASA,SAAT,CAAmBC,aAAnB,EAAkC;AACjD,SAAI,CAACrI,KAAKyC,QAAL,CAAc4F,aAAd,CAAL,EAAmC;AACjC,cAAO,KAAP;AACD;AACD,SAAMC,eAAetI,KAAKU,IAAL,CAAU2H,aAAV,EAAyBxE,MAAzB,CAAgC;AAAA,cAAO,CAAC,CAACpD,UAAUI,GAAV,CAAT;AAAA,MAAhC,CAArB;AACA,SAAIyH,aAAa7C,MAAb,KAAwB,CAA5B,EAA+B;AAC7B,cAAO,KAAP;AACD;AACD6C,kBAAa7E,OAAb,CAAqB,eAAO;AAC1B,WAAM8E,MAAMF,cAAcxH,GAAd,CAAZ;AACAJ,iBAAUI,GAAV,EAAe4F,IAAf,CAAoB;AAClBmB,mBAAUW,IAAIX,QAAJ,IAAgB5H,KAAKwI,IADb;AAElBhB,kBAASe,IAAIf,OAAJ,IAAexH,KAAKwI;AAFX,QAApB;AAID,MAND;AAOA,YAAO,IAAP;AACD,IAhBD;AAiBA,QAAKC,WAAL,GAAmB,SAASA,WAAT,CAAqBV,SAArB,EAAgCW,KAAhC,EAAuCC,OAAvC,EAAgD;AACjE,SACE,CAAC3I,KAAKiI,QAAL,CAAcF,SAAd,CAAD,IACA,CAAC/H,KAAKiI,QAAL,CAAcS,KAAd,CADD,IAEA,CAAC1I,KAAK4I,UAAL,CAAgBD,OAAhB,CAFD,IAGA,CAAClI,UAAUsH,SAAV,CAJH,EAKE;AACA,cAAO,KAAP;AACD;AACD,SAAMc,oBAAoBpI,UAAUsH,SAAV,EAAqBlE,MAArB,CAA4B,UAAC6D,GAAD;AAAA,cAASA,IAAIgB,KAAJ,MAAeC,OAAxB;AAAA,MAA5B,CAA1B;AACA,YAAO3I,KAAK8I,IAAL,CAAUD,iBAAV,EAA6BpI,UAAUsH,SAAV,CAA7B,CAAP;AACD,IAXD;AAYA,QAAKD,MAAL,GAAc,SAASA,MAAT,CAAgBC,SAAhB,EAA2B7G,IAA3B,EAAiC;AAC7C,YAAO2G,eAAekB,IAAf,CAAoB,IAApB,EAA0B,IAA1B,EAAgChB,SAAhC,EAA2C7G,IAA3C,CAAP;AACD,IAFD;AAGA,QAAK8H,MAAL,GAAc,SAASA,MAAT,CAAgBjB,SAAhB,EAA2B;AACvC,YAAOF,eAAekB,IAAf,CAAoB,IAApB,EAA0B,KAA1B,EAAiChB,SAAjC,CAAP;AACD,IAFD;AAGA,QAAKkB,OAAL,GAAe,SAASA,OAAT,GAAmB;AAChC,YAAO3G,UAAUoE,YAAYb,WAAWzF,IAAI+H,QAAJ,CAAalD,IAAxB,CAAZ,CAAV,CAAP;AACD,IAFD;AAGA,QAAKiE,IAAL,GAAY,SAASA,IAAT,GAAgB;AAC1B,SAAMC,iBAAiB/I,IAAI+H,QAAJ,CAAalD,IAApC;AACA,SAAMmE,iBAAiBvD,WAAWsD,cAAX,CAAvB;AACAhC,qBAAgB1G,SAAhB,EAA2BM,WAAWsI,GAAX,EAA3B,EAA6CD,cAA7C;AACAhD,cAASgD,cAAT;AACA,SAAME,WAAWlJ,IAAI+H,QAAJ,CAAalD,IAA9B;AACA,SAAMW,WAAWC,WAAWyD,QAAX,CAAjB;AACAlJ,SAAImJ,OAAJ,CAAYC,YAAZ,CAAyBxJ,KAAKc,WAAL,EAAzB,EAA6C,EAA7C,EAAiDgF,gBAAgBY,YAAYd,QAAZ,CAAhB,CAAjD;AACA,YAAO,IAAP;AACD,IATD;;AAWA,OAAM6D,WAAW,KAAKP,IAAL,CAAUQ,IAAV,CAAe,IAAf,CAAjB;AACA,QAAKC,KAAL,GAAa,SAASA,KAAT,GAAiB;AAC5BvJ,SAAIwJ,gBAAJ,CAAqB,YAArB,EAAmCH,QAAnC;AACA,YAAO,IAAP;AACD,IAHD;AAIA,QAAKjH,IAAL,GAAY,SAASA,IAAT,GAAgB;AAC1BpC,SAAIyJ,mBAAJ,CAAwB,YAAxB,EAAsCJ,QAAtC;AACA,YAAO,IAAP;AACD,IAHD;AAIA;AACD,EA7TH,C;;;;;;;;;;;;;;ACFA,KAAMK,YAAY,mBAAAC,CAAQ,CAAR,CAAlB;;AAEA,UAASjJ,WAAT,GAAuB;AACrB,UAAOkJ,OAAOC,MAAP,CAAc,IAAd,CAAP;AACD;;AAED,UAASxH,QAAT,CAAkByH,GAAlB,EAAuB;AACrB,UAAO,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAf,IAA2BA,QAAQ,IAAnC,IAA2C,EAAEA,eAAehC,KAAjB,CAAlD;AACD;;AAED,UAASiC,OAAT,CAAiBD,GAAjB,EAAsB;AACpB,UAAOA,eAAehC,KAAtB;AACD;;AAED,UAASD,QAAT,CAAkBiC,GAAlB,EAAuB;AACrB,UAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;;AAED,UAAStB,UAAT,CAAoBsB,GAApB,EAAyB;AACvB,UAAO,OAAOA,GAAP,KAAe,UAAtB;AACD;;AAED,UAASxJ,IAAT,CAAcE,GAAd,EAAmB;AACjB,UAAOoJ,OAAOtJ,IAAP,CAAYE,GAAZ,CAAP;AACD;;AAED,UAASoC,SAAT,CAAmBpC,GAAnB,EAAwB;AACtB,UAAO2F,KAAK6D,KAAL,CAAW7D,KAAKC,SAAL,CAAe5F,GAAf,CAAX,CAAP;AACD;;AAED,UAASkB,MAAT,GAAyB;AAAA,qCAANuI,IAAM;AAANA,SAAM;AAAA;;AACvB,UAAOL,OAAOlI,MAAP,CAAcwI,KAAd,CAAoB,IAApB,EAA0BD,IAA1B,CAAP;AACD;;AAED,UAAS3E,SAAT,CAAmB6E,KAAnB,EAA0B;AACxB,OAAI,OAAOA,KAAP,KAAiB,WAAjB,IAAgC,EAAEA,iBAAiBrC,KAAnB,CAApC,EAA+D;AAC7D,YAAOsC,SAAP;AACD;AACD,UAAOD,MAAM,CAAN,CAAP;AACD;;AAED,UAASzB,IAAT,CAAc2B,MAAd,EAAsBF,KAAtB,EAA6B;AAC3B,UAAOE,OAAOC,GAAP,CAAW,UAACC,GAAD,EAAS;AACzB,SAAI9I,QAAQ0I,MAAMzG,OAAN,CAAc6G,GAAd,CAAZ;AACA,SAAIC,UAAU,EAAd;AACA,YAAO/I,UAAU,CAAC,CAAlB,EAAqB;AACnB+I,iBAAUA,QAAQ1D,MAAR,CAAeqD,MAAMM,MAAN,CAAahJ,KAAb,EAAoB,CAApB,CAAf,CAAV;AACAA,eAAQ0I,MAAMzG,OAAN,CAAc6G,GAAd,CAAR;AACD;AACD,YAAOC,OAAP;AACD,IARM,EASJjK,MATI,CASG,UAACmK,WAAD,EAAcC,QAAd;AAAA,YAA2BD,YAAY5D,MAAZ,CAAmB6D,QAAnB,CAA3B;AAAA,IATH,EAS4D,EAT5D,EAUJpK,MAVI,CAUG,UAACmK,WAAD,EAAcH,GAAd,EAAsB;AAC5B,SAAIG,YAAYhH,OAAZ,CAAoB6G,GAApB,MAA6B,CAAC,CAAlC,EAAqC;AACnC,cAAOG,WAAP;AACD;AACD,YAAOA,YAAY5D,MAAZ,CAAmByD,eAAezC,KAAf,GAAuB,CAACyC,GAAD,CAAvB,GAA+BA,GAAlD,CAAP;AACD,IAfI,EAeF,EAfE,CAAP;AAgBD;;AAED,UAASK,OAAT,CAAiBP,MAAjB,EAAyBF,KAAzB,EAAgC;AAC9B,OAAMU,WAAWV,MAAMW,KAAN,EAAjB;AACApC,QAAK2B,MAAL,EAAaQ,QAAb;AACA,UAAOA,QAAP;AACD;;AAED,UAAS3E,IAAT,CAAcS,GAAd,EAAmB;AACjB,OAAI,CAACA,GAAD,IAAQ,EAAEA,eAAemB,KAAjB,CAAZ,EAAqC;AACnC,YAAO,IAAP;AACD;AACD,UAAOnB,IAAIA,IAAItB,MAAJ,GAAa,CAAjB,KAAuB,IAA9B;AACD;;AAED,UAAS+C,IAAT,GAAgB,CAAG;;AAEnB,UAAS2C,MAAT,CAAgBC,OAAhB,EAAyB;AACvB,UAAOA,YAAY,IAAZ,IAAqB3I,SAAS2I,OAAT,KAAqB,QAAOA,QAAQhJ,IAAf,MAAwB,QAAzE;AACD;;AAED,UAASiJ,UAAT,CAAoBlJ,IAApB,EAA0B;AACxB,OAAI,CAACgJ,OAAOhJ,IAAP,CAAL,EAAmB;AACjB,WAAM,IAAImJ,SAAJ,CAAc,wEAAd,CAAN;AACD;AACF;;AAED,UAAS3D,WAAT,CAAqB4D,QAArB,EAA+BpJ,IAA/B,EAAqC;AACnCkJ,cAAWlJ,IAAX;AACA,OAAIC,OAAOD,IAAX;AACA,OAAIqJ,IAAI,CAAR;AACA,UAAOpJ,IAAP,EAAa;AACXmJ,cAASnJ,IAAT,EAAeoJ,CAAf;AACApJ,YAAOA,KAAKA,IAAZ;AACAoJ,SAAIA,IAAI,CAAR;AACD;AACF;;AAED,UAASC,OAAT,CAAiBF,QAAjB,EAA2BpJ,IAA3B,EAAiC;AAC/B,OAAMuJ,WAAW,EAAjB;AACA/D,eAAY,UAAClD,IAAD,EAAO5C,KAAP,EAAiB;AAC3B6J,cAASjF,IAAT,CAAc8E,SAAS9G,IAAT,EAAe5C,KAAf,CAAd;AACD,IAFD,EAEGM,IAFH;AAGA,UAAOuJ,SAASC,WAAT,CAAqB,UAACC,IAAD,EAAOnH,IAAP;AAAA,YAAgB3C,OAAO,EAAP,EAAW2C,IAAX,EAAiB;AAC3DrC,aAAMwJ;AADqD,MAAjB,CAAhB;AAAA,IAArB,EAEH,IAFG,CAAP;AAGD;;AAED,UAAS7F,UAAT,CAAoB8F,OAApB,EAA6BC,WAA7B,EAA0C3J,IAA1C,EAAgD;AAC9C,UAAQ,SAAS4J,KAAT,CAAeC,CAAf,EAAkBC,CAAlB,EAAqBvH,IAArB,EAA2B8G,CAA3B,EAA8B;AACpC,SAAI9G,SAAS,IAAb,EAAmB;AACjB,cAAOuH,CAAP;AACD;AACDZ,gBAAW3G,IAAX;AACA,YAAOqH,MAAMC,CAAN,EAASA,EAAEC,CAAF,EAAKvH,IAAL,EAAW8G,CAAX,CAAT,EAAwB9G,KAAKtC,IAA7B,EAAmCoJ,IAAI,CAAvC,CAAP;AACD,IANO,CAMNK,OANM,EAMGC,WANH,EAMgB3J,IANhB,EAMsB,CANtB,CAAR;AAOD;;AAED,UAAS+J,iBAAT,CAA2BC,GAA3B,EAAgCC,QAAhC,EAA0C;AACxC,OAAI,CAACjC,QAAQgC,GAAR,CAAL,EAAmB;AACjB,WAAM,IAAIb,SAAJ,CACJ,2EADI,CAAN;AAGD;AACD,OAAIe,gBAAgB,CAApB;AACA,OAAMzB,UAAU,EAAhB;AACAuB,OAAI1I,OAAJ,CAAY,UAAC6I,EAAD,EAAQ;AAClBA,QAAG,UAACC,MAAD,EAAY;AACbF,wBAAiB,CAAjB;AACAzB,eAAQnE,IAAR,CAAa8F,MAAb;AACA,WAAIF,kBAAkBF,IAAI1G,MAA1B,EAAkC;AAChC2G,kBAASxB,OAAT;AACD;AACF,MAND;AAOD,IARD;AASD;;SAGc3D,K,GAAb6C,S;SACAhJ,W,GAAAA,W;SACAqJ,O,GAAAA,O;SACA1H,Q,GAAAA,Q;SACAmG,U,GAAAA,U;SACAX,Q,GAAAA,Q;SACAkD,M,GAAAA,M;SACAxD,W,GAAAA,W;SACA8D,O,GAAAA,O;SACA1F,U,GAAAA,U;SACAmG,iB,GAAAA,iB;SACA1D,I,GAAAA,I;SACA9H,I,GAAAA,I;SACA4F,I,GAAAA,I;SACAtD,S,GAAAA,S;SACAlB,M,GAAAA,M;SACA4D,S,GAAAA,S;SACAoD,I,GAAAA,I;SACAkC,O,GAAAA,O;;;;;;AC1JF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAG;AACH;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,cAAc;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG,YAAY;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB,QAAQ;AACjC;AACA;AACA;AACA;AACA;AACA,0BAAyB,QAAQ;AACjC;AACA;AACA;AACA;AACA;;;;;;;AC7FA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACRA;AACA;AACA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"marbles.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Marbles\"] = factory();\n\telse\n\t\troot[\"Marbles\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5286d99557cb69ea111c","import * as util from './util.js';\n\nmodule.exports = class Marbles {\n  constructor(routingGraph, win = window) {\n    const IMMUTABLE_GRAPH = routingGraph;\n    const DYNAMIC_SEGMENT_REGEX = /:[a-zA-Z]+(?=\\/?)/;\n    const DIGIT_SEGMENT_REGEX = /\\d+(?=\\/?)/;\n    const observers = util.keys(IMMUTABLE_GRAPH).reduce((obj, key) => {\n      obj[key] = [];\n      return obj;\n    }, util.emptyObject());\n    const graphStack = [];\n\n    // Private methods\n    function expandSegment(segment, data) {\n      return segment.replace(\n        DYNAMIC_SEGMENT_REGEX,\n        segmentKey => data[segmentKey.replace(':', '')]\n      );\n    }\n\n    function extractSegmentData(templateSegment, segmentWithData) {\n      const dynamicSegments = templateSegment.match(\n        new RegExp(DYNAMIC_SEGMENT_REGEX.source, 'g')\n      ) || [];\n      return (segmentWithData.match(DIGIT_SEGMENT_REGEX) || []).reduce((data, value, index) => {\n        data[dynamicSegments[index].replace(':', '')] = value;\n        return util.assign(util.emptyObject(), data);\n      },\n        util.emptyObject()\n      );\n    }\n\n    function segmentToRegex(segment) {\n      // It just got weird\n      const regexed = segment.replace(\n        new RegExp(DYNAMIC_SEGMENT_REGEX.source, 'g'),\n        DIGIT_SEGMENT_REGEX.source\n      );\n      return new RegExp(regexed);\n    }\n\n    function findListNode(nodeId, list) {\n      let next = list;\n      while (next) {\n        if (next.id === nodeId) {\n          return next;\n        }\n        next = next.next;\n      }\n      return null;\n    }\n\n    function chainData(list, upToNode) {\n      const data = util.emptyObject();\n      const stop = util.isObject(upToNode) ? upToNode : { data: {} };\n      let next = list;\n      while (next && next !== stop) {\n        util.assign(data, next.data);\n        next = next.next;\n      }\n      return util.assign(data, stop.data);\n    }\n\n    function graphNodeToListNode(id, graph) {\n      const graphNode = graph[id];\n      return util.assign(util.emptyObject(), graphNode, {\n        id,\n        segment: expandSegment(graphNode.segment, graphNode.data),\n        next: null,\n      });\n    }\n\n    function deactivateGraphNode(force, nodeId, immutableGraph) {\n      const graph = util.cloneDeep(immutableGraph);\n      function recDeactivate(target, current, g) {\n        const curr = g[current];\n        if (target === current || curr.dependency === target || force) {\n          curr.active = false;\n          curr.data = util.emptyObject();\n        }\n        curr.children.forEach(childId => recDeactivate(target, childId, g));\n      }\n      recDeactivate(nodeId, nodeId, graph);\n      return graph;\n    }\n\n    function activateGraphNode(nodeId, data, immutableGraph) {\n      const graph = util.cloneDeep(immutableGraph);\n      const parents = util.keys(graph).filter(key => graph[key].children.indexOf(nodeId) !== -1);\n      function dfsActivate(searchId, currentId, dependencyMet) {\n        const curr = graph[currentId];\n        const search = graph[searchId];\n        if (currentId === searchId && dependencyMet) {\n          search.active = true;\n          search.data = data;\n          return true;\n        }\n        else if (currentId === searchId && !dependencyMet) {\n          return false;\n        }\n        return curr.children.reduce(\n          (depMet, childId) => dfsActivate(searchId, childId, depMet),\n          dependencyMet || currentId === search.dependency\n        );\n      }\n\n      const activated = dfsActivate(nodeId, 'root', false);\n      if (activated) {\n        // deactivate immediate siblings\n        return parents.reduce((g, parentId) =>\n          g[parentId].children.filter(id => id !== nodeId).reduce((retG, childId) =>\n            deactivateGraphNode(true, childId, retG),\n            g),\n          graph);\n      }\n      return graph;\n    }\n\n    function appendNode(node, head) {\n      const clonedHead = util.cloneDeep(head);\n      let next = clonedHead;\n      let last;\n      let dependencyMet = false;\n      while (next) {\n        dependencyMet = dependencyMet || next.id === node.dependency;\n        last = next;\n        next = next.next;\n      }\n      if (dependencyMet) {\n        last.next = util.cloneDeep(node);\n      }\n      return clonedHead;\n    }\n\n    function parseHash(hashRoute, routeGraph) {\n      function recParse(hash, rootId, visitedNodes, graph) {\n        const root = graph[rootId];\n        return root.children.reduce((g, childId) => {\n          const child = graph[childId];\n          let newG = g;\n          const matches = hash.match(segmentToRegex(child.segment)) || [];\n          const substrIndex = matches.index ? matches.index + matches[0].length : 0;\n          if (visitedNodes[childId]) {\n            return newG;\n          }\n          visitedNodes[childId] = true;\n          if (matches.length > 0 && (graph[child.dependency] || util.emptyObject()).active) {\n            newG = activateGraphNode(\n              childId,\n              extractSegmentData(child.segment, util.arrayHead(matches)),\n              graph\n            );\n          }\n          return recParse(hash.substr(substrIndex), childId, visitedNodes, newG);\n        }, graph);\n      }\n      const newGraph = util.cloneDeep(routeGraph);\n      return recParse(hashRoute, 'root', {}, newGraph);\n    }\n\n    function buildGraph(hash) {\n      return parseHash(hash, IMMUTABLE_GRAPH);\n    }\n\n    function listToHashRoute(head) {\n      return util.listReduce((hash, node) => {\n        if (node.segment) {\n          return `${hash}${node.segment}/`;\n        }\n        return hash;\n      }, '#', head);\n    }\n\n    function graphToLinkedList(graph, rootId, listHead, visitedNodes) {\n      const root = graph[rootId];\n      const nextListNode = graphNodeToListNode(rootId, graph);\n      const newHead = root.active ? appendNode(nextListNode, listHead) : util.cloneDeep(listHead);\n\n      return root.children.reduce(\n        (head, childId) => {\n          if (visitedNodes[childId]) {\n            return head;\n          }\n          visitedNodes[childId] = true;\n          return graphToLinkedList(graph, childId, head, visitedNodes);\n        },\n        newHead\n      );\n    }\n\n    function logGraph(newGraph) {\n      const lastGraph = util.peek(graphStack);\n      if (!lastGraph || JSON.stringify(lastGraph) !== JSON.stringify(newGraph)) {\n        graphStack.push(newGraph);\n      }\n      return newGraph;\n    }\n\n    function graphToList(graph) {\n      if (!graph) {\n        return null;\n      }\n      return graphToLinkedList(\n        graph,\n        'root',\n        graphNodeToListNode('root', graph),\n        util.emptyObject()\n      );\n    }\n\n    function listDiff(from, against, includeUpdates) {\n      return util.listReduce((arr, node) => {\n        const found = findListNode(node.id, against);\n        if (!found || (includeUpdates && !util.equal(found.data, node.data))) {\n          return arr.concat(node);\n        }\n        return arr;\n      }, [], from);\n    }\n\n    function notifyObservers(obsObj, oldGraph, newGraph) {\n      const oldListHead = graphToList(oldGraph);\n      const newListHead = graphToList(newGraph);\n      const removed = listDiff(oldListHead, newListHead, false);\n      const insertedNodes = listDiff(newListHead, oldListHead, true);\n      removed.forEach((node) => {\n        obsObj[node.id].forEach((obs) => {\n          obs.removed(chainData(oldListHead, node));\n        });\n      });\n      util.listForEach((node) => {\n        obsObj[node.id].forEach((obs) => {\n          obs.inserted(chainData(newListHead, node));\n        });\n      }, insertedNodes[0] || null);\n    }\n\n    function insertOrRemove(insert, segmentId, data) {\n      let dataToUse = data;\n      if (!util.isString(segmentId) || !IMMUTABLE_GRAPH[segmentId]) {\n        return null;\n      }\n      if (data === null || typeof data !== 'object' || data instanceof Array) {\n        dataToUse = util.emptyObject();\n      }\n      const graph = buildGraph(win.location.hash);\n      let newGraph;\n      if (insert) {\n        newGraph = activateGraphNode(segmentId, dataToUse, graph);\n      }\n      else {\n        newGraph = deactivateGraphNode(false, segmentId, graph);\n      }\n      win.location.hash = listToHashRoute(graphToList(newGraph));\n      return this;\n    }\n    // End private methods\n\n    // Public methods\n    this.subscribe = function subscribe(subscriptions) {\n      if (!util.isObject(subscriptions)) {\n        return false;\n      }\n      const matchingKeys = util.keys(subscriptions).filter(key => !!observers[key]);\n      if (matchingKeys.length === 0) {\n        return false;\n      }\n      matchingKeys.forEach(key => {\n        const sub = subscriptions[key];\n        observers[key].push({\n          inserted: sub.inserted || util.noop,\n          removed: sub.removed || util.noop,\n        });\n      });\n      return true;\n    };\n    this.unsubscribe = function unsubscribe(segmentId, event, handler) {\n      if (\n        !util.isString(segmentId) ||\n        !util.isString(event) ||\n        !util.isFunction(handler) ||\n        !observers[segmentId]\n      ) {\n        return false;\n      }\n      const matchingObservers = observers[segmentId].filter((obs) => obs[event] === handler);\n      return util.pull(matchingObservers, observers[segmentId]);\n    };\n    this.insert = function insert(segmentId, data) {\n      return insertOrRemove.call(this, true, segmentId, data);\n    };\n    this.remove = function remove(segmentId) {\n      return insertOrRemove.call(this, false, segmentId);\n    };\n    this.getData = function getData() {\n      return chainData(graphToList(buildGraph(win.location.hash)));\n    };\n    this.step = function step() {\n      const beginningState = win.location.hash;\n      const beginningGraph = buildGraph(beginningState);\n      notifyObservers(observers, graphStack.pop(), beginningGraph);\n      logGraph(beginningGraph);\n      const newState = win.location.hash;\n      const newGraph = buildGraph(newState);\n      win.history.replaceState(util.emptyObject(), '', listToHashRoute(graphToList(newGraph)));\n      return this;\n    };\n\n    const listener = this.step.bind(this);\n    this.start = function start() {\n      win.addEventListener('hashchange', listener);\n      return this;\n    };\n    this.stop = function stop() {\n      win.removeEventListener('hashchange', listener);\n      return this;\n    };\n    // End public methods\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/marbles.js","const deepEqual = require('deep-equal');\n\nfunction emptyObject() {\n  return Object.create(null);\n}\n\nfunction isObject(any) {\n  return typeof any === 'object' && any !== null && !(any instanceof Array);\n}\n\nfunction isArray(any) {\n  return any instanceof Array;\n}\n\nfunction isString(any) {\n  return typeof any === 'string';\n}\n\nfunction isFunction(any) {\n  return typeof any === 'function';\n}\n\nfunction keys(obj) {\n  return Object.keys(obj);\n}\n\nfunction cloneDeep(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\nfunction assign(...args) {\n  return Object.assign.apply(this, args);\n}\n\nfunction arrayHead(array) {\n  if (typeof array === 'undefined' || !(array instanceof Array)) {\n    return undefined;\n  }\n  return array[0];\n}\n\nfunction pull(values, array) {\n  return values.map((val) => {\n    let index = array.indexOf(val);\n    let results = [];\n    while (index !== -1) {\n      results = results.concat(array.splice(index, 1));\n      index = array.indexOf(val);\n    }\n    return results;\n  })\n    .reduce((returnArray, subArray) => returnArray.concat(subArray), [])\n    .reduce((returnArray, val) => {\n      if (returnArray.indexOf(val) !== -1) {\n        return returnArray;\n      }\n      return returnArray.concat(val instanceof Array ? [val] : val);\n    }, []);\n}\n\nfunction without(values, array) {\n  const newArray = array.slice();\n  pull(values, newArray);\n  return newArray;\n}\n\nfunction peek(arr) {\n  if (!arr || !(arr instanceof Array)) {\n    return null;\n  }\n  return arr[arr.length - 1] || null;\n}\n\nfunction noop() { }\n\nfunction isList(listish) {\n  return listish === null || (isObject(listish) && typeof listish.next === 'object');\n}\n\nfunction assertList(list) {\n  if (!isList(list)) {\n    throw new TypeError('listForEach requires a list! Lists are objects with a `next` property.');\n  }\n}\n\nfunction listForEach(iterator, list) {\n  assertList(list);\n  let next = list;\n  let i = 0;\n  while (next) {\n    iterator(next, i);\n    next = next.next;\n    i = i + 1;\n  }\n}\n\nfunction listMap(iterator, list) {\n  const newNodes = [];\n  listForEach((node, index) => {\n    newNodes.push(iterator(node, index));\n  }, list);\n  return newNodes.reduceRight((tail, node) => assign({}, node, {\n    next: tail\n  }), null);\n}\n\nfunction listReduce(reducer, accumulator, list) {\n  return (function foldl(f, a, head, i) {\n    if (head === null) {\n      return a;\n    }\n    assertList(head);\n    return foldl(f, f(a, head, i), head.next, i + 1);\n  }(reducer, accumulator, list, 0));\n}\n\nfunction batchAsyncActions(fns, callback) {\n  if (!isArray(fns)) {\n    throw new TypeError(\n      'batchAsyncResults() expects an array of functions as the first parameter.'\n    );\n  }\n  let resolvedCount = 0;\n  const results = [];\n  fns.forEach((fn) => {\n    fn((result) => {\n      resolvedCount += 1;\n      results.push(result);\n      if (resolvedCount === fns.length) {\n        callback(results);\n      }\n    });\n  });\n}\n\nexport {\n  deepEqual as equal,\n  emptyObject,\n  isArray,\n  isObject,\n  isFunction,\n  isString,\n  isList,\n  listForEach,\n  listMap,\n  listReduce,\n  batchAsyncActions,\n  noop,\n  keys,\n  peek,\n  cloneDeep,\n  assign,\n  arrayHead,\n  pull,\n  without\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/deep-equal/index.js\n// module id = 2\n// module chunks = 0","exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/deep-equal/lib/keys.js\n// module id = 3\n// module chunks = 0","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/deep-equal/lib/is_arguments.js\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}