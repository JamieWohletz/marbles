{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 1c7dade5f6cd08e2ff6a","webpack:///./src/marbles.js","webpack:///./src/util.js","webpack:///./~/deep-equal/index.js","webpack:///./~/deep-equal/lib/keys.js","webpack:///./~/deep-equal/lib/is_arguments.js"],"names":["util","Marbles","routingGraph","win","window","IMMUTABLE_GRAPH","DYNAMIC_SEGMENT_REGEX","DIGIT_SEGMENT_REGEX","observers","keys","reduce","obj","key","emptyObject","graphStack","expandSegment","segment","data","replace","segmentKey","extractSegmentData","templateSegment","segmentWithData","dynamicSegments","match","RegExp","source","value","index","assign","segmentToRegex","regexed","findListNode","nodeId","list","next","id","chainData","upToNode","stop","isObject","graphNodeToListNode","graph","graphNode","deactivateGraphNode","force","immutableGraph","cloneDeep","recDeactivate","target","current","g","curr","dependency","active","children","forEach","childId","activateGraphNode","parents","filter","indexOf","dfsActivate","searchId","currentId","dependencyMet","search","depMet","activated","parentId","retG","appendNode","node","head","clonedHead","last","parseHash","hashRoute","routeGraph","recParse","hash","rootId","visitedNodes","root","child","newG","matches","substrIndex","length","arrayHead","substr","newGraph","buildGraph","listToHashRoute","listReduce","graphToLinkedList","listHead","nextListNode","newHead","logGraph","lastGraph","peek","JSON","stringify","push","graphToList","listDiff","from","against","arr","found","equal","concat","notifyObservers","obsObj","oldGraph","oldListHead","newListHead","removed","insertedNodes","obs","listForEach","inserted","insertOrRemove","insert","routeId","dataToUse","isString","Array","location","subscribe","subscriptions","matchingKeys","sub","noop","unsubscribe","route","event","handler","isFunction","matchingObservers","pull","call","remove","getData","step","pop","history","replaceState","listener","bind","start","addEventListener","removeEventListener","deepEqual","require","Object","create","any","isArray","parse","args","apply","array","undefined","values","map","val","results","splice","returnArray","subArray","without","newArray","slice","isList","listish","assertList","TypeError","iterator","i","listMap","newNodes","reduceRight","tail","reducer","accumulator","foldl","f","a","batchAsyncActions","fns","callback","resolvedCount","fn","result"],"mappings":"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","file":"marbles.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"marbles\"] = factory();\n\telse\n\t\troot[\"marbles\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1c7dade5f6cd08e2ff6a","import * as util from './util.js';\r\n\r\nexport default class Marbles {\r\n  constructor(routingGraph, win = window) {\r\n    const IMMUTABLE_GRAPH = routingGraph;\r\n    const DYNAMIC_SEGMENT_REGEX = /:[a-zA-Z]+(?=\\/?)/;\r\n    const DIGIT_SEGMENT_REGEX = /\\d+(?=\\/?)/;\r\n    const observers = util.keys(IMMUTABLE_GRAPH).reduce((obj, key) => {\r\n      obj[key] = [];\r\n      return obj;\r\n    }, util.emptyObject());\r\n    const graphStack = [];\r\n\r\n    // Private methods\r\n    function expandSegment(segment, data) {\r\n      return segment.replace(\r\n        DYNAMIC_SEGMENT_REGEX,\r\n        segmentKey => data[segmentKey.replace(':', '')]\r\n      );\r\n    }\r\n\r\n    function extractSegmentData(templateSegment, segmentWithData) {\r\n      const dynamicSegments = templateSegment.match(\r\n        new RegExp(DYNAMIC_SEGMENT_REGEX.source, 'g')\r\n      ) || [];\r\n      return (segmentWithData.match(DIGIT_SEGMENT_REGEX) || []).reduce((data, value, index) => {\r\n        data[dynamicSegments[index].replace(':', '')] = value;\r\n        return util.assign(util.emptyObject(), data);\r\n      },\r\n        util.emptyObject()\r\n      );\r\n    }\r\n\r\n    function segmentToRegex(segment) {\r\n      // It just got weird\r\n      const regexed = segment.replace(\r\n        new RegExp(DYNAMIC_SEGMENT_REGEX.source, 'g'),\r\n        DIGIT_SEGMENT_REGEX.source\r\n      );\r\n      return new RegExp(regexed);\r\n    }\r\n\r\n    function findListNode(nodeId, list) {\r\n      let next = list;\r\n      while (next) {\r\n        if (next.id === nodeId) {\r\n          return next;\r\n        }\r\n        next = next.next;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    function chainData(list, upToNode) {\r\n      const data = util.emptyObject();\r\n      const stop = util.isObject(upToNode) ? upToNode : { data: {} };\r\n      let next = list;\r\n      while (next && next !== stop) {\r\n        util.assign(data, next.data);\r\n        next = next.next;\r\n      }\r\n      return util.assign(data, stop.data);\r\n    }\r\n\r\n    function graphNodeToListNode(id, graph) {\r\n      const graphNode = graph[id];\r\n      return util.assign(util.emptyObject(), graphNode, {\r\n        id,\r\n        segment: expandSegment(graphNode.segment, graphNode.data),\r\n        next: null,\r\n      });\r\n    }\r\n\r\n    function deactivateGraphNode(force, nodeId, immutableGraph) {\r\n      const graph = util.cloneDeep(immutableGraph);\r\n      function recDeactivate(target, current, g) {\r\n        const curr = g[current];\r\n        if (target === current || curr.dependency === target || force) {\r\n          curr.active = false;\r\n          curr.data = util.emptyObject();\r\n        }\r\n        curr.children.forEach(childId => recDeactivate(target, childId, g));\r\n      }\r\n      recDeactivate(nodeId, nodeId, graph);\r\n      return graph;\r\n    }\r\n\r\n    function activateGraphNode(nodeId, data, immutableGraph) {\r\n      const graph = util.cloneDeep(immutableGraph);\r\n      const parents = util.keys(graph).filter(key => graph[key].children.indexOf(nodeId) !== -1);\r\n      function dfsActivate(searchId, currentId, dependencyMet) {\r\n        const curr = graph[currentId];\r\n        const search = graph[searchId];\r\n        if (currentId === searchId && dependencyMet) {\r\n          search.active = true;\r\n          search.data = data;\r\n          return true;\r\n        }\r\n        else if (currentId === searchId && !dependencyMet) {\r\n          return false;\r\n        }\r\n        return curr.children.reduce(\r\n          (depMet, childId) => dfsActivate(searchId, childId, depMet),\r\n          dependencyMet || currentId === search.dependency\r\n        );\r\n      }\r\n\r\n      const activated = dfsActivate(nodeId, 'root', false);\r\n      if (activated) {\r\n        // deactivate immediate siblings\r\n        return parents.reduce((g, parentId) =>\r\n          g[parentId].children.filter(id => id !== nodeId).reduce((retG, childId) =>\r\n            deactivateGraphNode(true, childId, retG),\r\n            g),\r\n          graph);\r\n      }\r\n      return graph;\r\n    }\r\n\r\n    function appendNode(node, head) {\r\n      const clonedHead = util.cloneDeep(head);\r\n      let next = clonedHead;\r\n      let last;\r\n      let dependencyMet = false;\r\n      while (next) {\r\n        dependencyMet = dependencyMet || next.id === node.dependency;\r\n        last = next;\r\n        next = next.next;\r\n      }\r\n      if (dependencyMet) {\r\n        last.next = util.cloneDeep(node);\r\n      }\r\n      return clonedHead;\r\n    }\r\n\r\n    function parseHash(hashRoute, routeGraph) {\r\n      function recParse(hash, rootId, visitedNodes, graph) {\r\n        const root = graph[rootId];\r\n        return root.children.reduce((g, childId) => {\r\n          const child = graph[childId];\r\n          let newG = g;\r\n          const matches = hash.match(segmentToRegex(child.segment)) || [];\r\n          const substrIndex = matches.index ? matches.index + matches[0].length : 0;\r\n          if (visitedNodes[childId]) {\r\n            return newG;\r\n          }\r\n          visitedNodes[childId] = true;\r\n          if (matches.length > 0 && (graph[child.dependency] || util.emptyObject()).active) {\r\n            newG = activateGraphNode(\r\n              childId,\r\n              extractSegmentData(child.segment, util.arrayHead(matches)),\r\n              graph\r\n            );\r\n          }\r\n          return recParse(hash.substr(substrIndex), childId, visitedNodes, newG);\r\n        }, graph);\r\n      }\r\n      const newGraph = util.cloneDeep(routeGraph);\r\n      return recParse(hashRoute, 'root', {}, newGraph);\r\n    }\r\n\r\n    function buildGraph(hash) {\r\n      return parseHash(hash, IMMUTABLE_GRAPH);\r\n    }\r\n\r\n    function listToHashRoute(head) {\r\n      return util.listReduce((hash, node) => {\r\n        if (node.segment) {\r\n          return `${hash}${node.segment}/`;\r\n        }\r\n        return hash;\r\n      }, '#', head);\r\n    }\r\n\r\n    function graphToLinkedList(graph, rootId, listHead, visitedNodes) {\r\n      const root = graph[rootId];\r\n      const nextListNode = graphNodeToListNode(rootId, graph);\r\n      const newHead = root.active ? appendNode(nextListNode, listHead) : util.cloneDeep(listHead);\r\n\r\n      return root.children.reduce(\r\n        (head, childId) => {\r\n          if (visitedNodes[childId]) {\r\n            return head;\r\n          }\r\n          visitedNodes[childId] = true;\r\n          return graphToLinkedList(graph, childId, head, visitedNodes);\r\n        },\r\n        newHead\r\n      );\r\n    }\r\n\r\n    function logGraph(newGraph) {\r\n      const lastGraph = util.peek(graphStack);\r\n      if (!lastGraph || JSON.stringify(lastGraph) !== JSON.stringify(newGraph)) {\r\n        graphStack.push(newGraph);\r\n      }\r\n      return newGraph;\r\n    }\r\n\r\n    function graphToList(graph) {\r\n      if (!graph) {\r\n        return null;\r\n      }\r\n      return graphToLinkedList(\r\n        graph,\r\n        'root',\r\n        graphNodeToListNode('root', graph),\r\n        util.emptyObject()\r\n      );\r\n    }\r\n\r\n    function listDiff(from, against) {\r\n      return util.listReduce((arr, node) => {\r\n        const found = findListNode(node.id, against);\r\n        if (!found || !util.equal(found.data, node.data)) {\r\n          return arr.concat(node);\r\n        }\r\n        return arr;\r\n      }, [], from);\r\n    }\r\n\r\n    function notifyObservers(obsObj, oldGraph, newGraph) {\r\n      const oldListHead = graphToList(oldGraph);\r\n      const newListHead = graphToList(newGraph);\r\n      const removed = listDiff(oldListHead, newListHead);\r\n      const insertedNodes = listDiff(newListHead, oldListHead);\r\n      removed.forEach((node) => {\r\n        obsObj[node.id].forEach((obs) => {\r\n          obs.removed(chainData(oldListHead, node));\r\n        });\r\n      });\r\n      util.listForEach((node) => {\r\n        obsObj[node.id].forEach((obs) => {\r\n          obs.inserted(chainData(newListHead, node));\r\n        });\r\n      }, insertedNodes[0] || null);\r\n    }\r\n\r\n    function insertOrRemove(insert, routeId, data) {\r\n      let dataToUse = data;\r\n      if (!util.isString(routeId) || !IMMUTABLE_GRAPH[routeId]) {\r\n        return null;\r\n      }\r\n      if (data === null || typeof data !== 'object' || data instanceof Array) {\r\n        dataToUse = util.emptyObject();\r\n      }\r\n      const graph = buildGraph(win.location.hash);\r\n      let newGraph;\r\n      if (insert) {\r\n        newGraph = activateGraphNode(routeId, dataToUse, graph);\r\n      }\r\n      else {\r\n        newGraph = deactivateGraphNode(false, routeId, graph);\r\n      }\r\n      win.location.hash = listToHashRoute(graphToList(newGraph));\r\n      return this;\r\n    }\r\n    // End private methods\r\n\r\n    // Public methods\r\n    this.subscribe = function subscribe(subscriptions) {\r\n      if (!util.isObject(subscriptions)) {\r\n        return false;\r\n      }\r\n      const matchingKeys = util.keys(subscriptions).filter(key => !!observers[key]);\r\n      if (matchingKeys.length === 0) {\r\n        return false;\r\n      }\r\n      matchingKeys.forEach(key => {\r\n        const sub = subscriptions[key];\r\n        observers[key].push({\r\n          inserted: sub.inserted || util.noop,\r\n          removed: sub.removed || util.noop,\r\n        });\r\n      });\r\n      return true;\r\n    };\r\n    this.unsubscribe = function unsubscribe(route, event, handler) {\r\n      if (\r\n        !util.isString(route) ||\r\n        !util.isString(event) ||\r\n        !util.isFunction(handler) ||\r\n        !observers[route]\r\n      ) {\r\n        return false;\r\n      }\r\n      const matchingObservers = observers[route].filter((obs) => obs[event] === handler);\r\n      return util.pull(matchingObservers, observers[route]);\r\n    };\r\n    this.insert = function insert(routeId, data) {\r\n      return insertOrRemove.call(this, true, routeId, data);\r\n    };\r\n    this.remove = function remove(routeId) {\r\n      return insertOrRemove.call(this, false, routeId);\r\n    };\r\n    this.getData = function getData() {\r\n      return chainData(graphToList(buildGraph(win.location.hash)));\r\n    };\r\n    this.step = function step() {\r\n      const hash = win.location.hash;\r\n      const graph = buildGraph(hash);\r\n      notifyObservers(observers, graphStack.pop(), graph);\r\n      logGraph(graph);\r\n      win.history.replaceState(util.emptyObject(), '', listToHashRoute(graphToList(graph)));\r\n      return this;\r\n    };\r\n\r\n    const listener = this.step.bind(this);\r\n    this.start = function start() {\r\n      win.addEventListener('hashchange', listener);\r\n      return this;\r\n    };\r\n    this.stop = function stop() {\r\n      win.removeEventListener('hashchange', listener);\r\n      return this;\r\n    };\r\n    // End public methods\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/marbles.js","const deepEqual = require('deep-equal');\r\n\r\nfunction emptyObject() {\r\n  return Object.create(null);\r\n}\r\n\r\nfunction isObject(any) {\r\n  return typeof any === 'object' && any !== null && !(any instanceof Array);\r\n}\r\n\r\nfunction isArray(any) {\r\n  return any instanceof Array;\r\n}\r\n\r\nfunction isString(any) {\r\n  return typeof any === 'string';\r\n}\r\n\r\nfunction isFunction(any) {\r\n  return typeof any === 'function';\r\n}\r\n\r\nfunction keys(obj) {\r\n  return Object.keys(obj);\r\n}\r\n\r\nfunction cloneDeep(obj) {\r\n  return JSON.parse(JSON.stringify(obj));\r\n}\r\n\r\nfunction assign(...args) {\r\n  return Object.assign.apply(this, args);\r\n}\r\n\r\nfunction arrayHead(array) {\r\n  if (typeof array === 'undefined' || !(array instanceof Array)) {\r\n    return undefined;\r\n  }\r\n  return array[0];\r\n}\r\n\r\nfunction pull(values, array) {\r\n  return values.map((val) => {\r\n    let index = array.indexOf(val);\r\n    let results = [];\r\n    while (index !== -1) {\r\n      results = results.concat(array.splice(index, 1));\r\n      index = array.indexOf(val);\r\n    }\r\n    return results;\r\n  })\r\n    .reduce((returnArray, subArray) => returnArray.concat(subArray), [])\r\n    .reduce((returnArray, val) => {\r\n      if (returnArray.indexOf(val) !== -1) {\r\n        return returnArray;\r\n      }\r\n      return returnArray.concat(val instanceof Array ? [val] : val);\r\n    }, []);\r\n}\r\n\r\nfunction without(values, array) {\r\n  const newArray = array.slice();\r\n  pull(values, newArray);\r\n  return newArray;\r\n}\r\n\r\nfunction peek(arr) {\r\n  if (!arr || !(arr instanceof Array)) {\r\n    return null;\r\n  }\r\n  return arr[arr.length - 1] || null;\r\n}\r\n\r\nfunction noop() { }\r\n\r\nfunction isList(listish) {\r\n  return listish === null || (isObject(listish) && typeof listish.next === 'object');\r\n}\r\n\r\nfunction assertList(list) {\r\n  if (!isList(list)) {\r\n    throw new TypeError('listForEach requires a list! Lists are objects with a `next` property.');\r\n  }\r\n}\r\n\r\nfunction listForEach(iterator, list) {\r\n  assertList(list);\r\n  let next = list;\r\n  let i = 0;\r\n  while (next) {\r\n    iterator(next, i);\r\n    next = next.next;\r\n    i = i + 1;\r\n  }\r\n}\r\n\r\nfunction listMap(iterator, list) {\r\n  const newNodes = [];\r\n  listForEach((node, index) => {\r\n    newNodes.push(iterator(node, index));\r\n  }, list);\r\n  return newNodes.reduceRight((tail, node) => assign({}, node, {\r\n    next: tail\r\n  }), null);\r\n}\r\n\r\nfunction listReduce(reducer, accumulator, list) {\r\n  return (function foldl(f, a, head, i) {\r\n    if (head === null) {\r\n      return a;\r\n    }\r\n    assertList(head);\r\n    return foldl(f, f(a, head, i), head.next, i + 1);\r\n  }(reducer, accumulator, list, 0));\r\n}\r\n\r\nfunction batchAsyncActions(fns, callback) {\r\n  if (!isArray(fns)) {\r\n    throw new TypeError(\r\n      'batchAsyncResults() expects an array of functions as the first parameter.'\r\n    );\r\n  }\r\n  let resolvedCount = 0;\r\n  const results = [];\r\n  fns.forEach((fn) => {\r\n    fn((result) => {\r\n      resolvedCount += 1;\r\n      results.push(result);\r\n      if (resolvedCount === fns.length) {\r\n        callback(results);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nexport {\r\n  deepEqual as equal,\r\n  emptyObject,\r\n  isArray,\r\n  isObject,\r\n  isFunction,\r\n  isString,\r\n  isList,\r\n  listForEach,\r\n  listMap,\r\n  listReduce,\r\n  batchAsyncActions,\r\n  noop,\r\n  keys,\r\n  peek,\r\n  cloneDeep,\r\n  assign,\r\n  arrayHead,\r\n  pull,\r\n  without\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/deep-equal/index.js\n// module id = 2\n// module chunks = 0","exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/deep-equal/lib/keys.js\n// module id = 3\n// module chunks = 0","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/deep-equal/lib/is_arguments.js\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}